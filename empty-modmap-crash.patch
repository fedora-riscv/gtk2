diff -up gtk+-2.12.10/gdk/x11/gdkkeys-x11.c.empty-modmap-crash gtk+-2.12.10/gdk/x11/gdkkeys-x11.c
--- gtk+-2.12.10/gdk/x11/gdkkeys-x11.c.empty-modmap-crash	2008-06-16 22:16:51.000000000 -0400
+++ gtk+-2.12.10/gdk/x11/gdkkeys-x11.c	2008-06-16 22:17:09.000000000 -0400
@@ -1661,7 +1661,7 @@ _gdk_keymap_key_is_modifier (GdkKeymap *
     {
       XkbDescRec *xkb = get_xkb (keymap_x11);
       
-      if (xkb->map->modmap[keycode] != 0)
+      if (xkb->map->modmap && xkb->map->modmap[keycode] != 0)
 	return TRUE;
     }
   else
